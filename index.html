<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kadon Liang — Project Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Light Mode */
        .theme-light {
            --bg-primary: #f9fafb; /* Lighter gray */
            --bg-secondary: #ffffff; /* White */
            --bg-accent: #e5e7eb; /* Gray 200 */
            --text-primary: #111827; /* Dark gray */
            --text-secondary: #6b7280; /* Medium gray */
            --text-accent: #3b82f6; /* Blue */
            --border-primary: #e5e7eb; /* Gray 200 */
        }

        /* Dark Mode */
        .theme-dark {
            --bg-primary: #121212; /* Very dark gray */
            --bg-secondary: #1e1e1e; /* Dark gray */
            --bg-accent: #333333; /* Lighter dark */
            --text-primary: #f3f4f6; /* Off-white */
            --text-secondary: #9ca3af; /* Light gray */
            --text-accent: #60a5fa; /* Light blue */
            --border-primary: #2b2b2b; /* Dark border */
        }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
        }

        .bg-primary { background-color: var(--bg-primary); }
        .bg-secondary { background-color: var(--bg-secondary); }
        .bg-accent { background-color: var(--bg-accent); }
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-accent { color: var(--text-accent); }
        .border-primary { border-color: var(--border-primary); }
        .shadow-custom { box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.05); }
        .dark .shadow-custom { box-shadow: 0 4px 12px 0 rgba(0, 0, 0, 0.1); }

        /* Sidebar styles */
        #sidebar {
            transition: transform 0.3s ease-in-out;
        }

        #sidebar-overlay {
            transition: opacity 0.3s ease-in-out;
        }

        /* Project card fade-in animation */
        .project-card {
            opacity: 0;
            transform: translateY(20px);
            /* Note: transition-delay is now set inline by JS */
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .project-card.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Modal styles */
        .modal {
            transition: opacity 0.3s ease;
        }

        .modal-content {
            transition: transform 0.3s ease, opacity 0.3s ease;
            transform: translateY(20px) scale(0.95);
            opacity: 0;
        }

        /* This .open class is toggled by JS to show the modal content */
        .modal.open .modal-content {
            transform: translateY(0) scale(1);
            opacity: 1;
        }

        /* Custom scrollbar for sidebar */
        #sidebar-content::-webkit-scrollbar {
            width: 4px;
        }
        #sidebar-content::-webkit-scrollbar-thumb {
            background-color: var(--text-accent);
            border-radius: 4px;
        }
        #sidebar-content::-webkit-scrollbar-track {
            background: transparent;
        }

        /* Custom styles for modal lists */
        #modal-description ul {
            list-style-type: disc; /* Adds bullet points */
            padding-left: 1.5rem;  /* Indents the bullets (24px) */
            margin-top: 1rem;      /* Space above the list */
            margin-bottom: 1rem;   /* Space below the list */
        }
        #modal-description li {
            margin-top: 0.5rem;    /* Adds vertical spacing between items */
            margin-bottom: 0.5rem; /* Adds vertical spacing between items */
        }
    </style>
</head>
<body class="theme-light">

    <!-- 
      HEADER
      - Always visible, holds sidebar toggle and theme toggle.
    -->
    <header class="bg-secondary/80 dark:bg-secondary/80 backdrop-blur-md sticky top-0 z-40 border-b border-primary w-full">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl">
            <div class="flex items-center justify-between h-16">
                <!-- Left side: Sidebar Toggle -->
                <div class="flex items-center">
                    <button id="sidebar-open" class="p-2 rounded-md text-secondary">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                </div>

                <!-- Right side: Theme Toggle -->
                <div class="flex items-center">
                    <button id="theme-toggle" class="p-2 rounded-md text-light-text-secondary dark:text-dark-text-secondary">
                        <!-- Replaced Sun Icon SVG -->
                        <svg class="theme-icon-sun w-6 h-6 hidden dark:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                        <svg class="theme-icon-moon w-6 h-6 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- 
      SIDEBAR
      - Pop-out navigation menu.
    -->
    <div id="sidebar-container" class="fixed inset-0 z-50 hidden">
        <!-- Overlay -->
        <div id="sidebar-overlay" class="absolute inset-0 bg-black/50 opacity-0"></div>

        <!-- Sidebar -->
        <div id="sidebar" class="relative bg-secondary h-full w-64 sm:w-80 shadow-xl -translate-x-full">
            <div class="flex items-center justify-between p-4 border-b border-primary">
                <h2 class="text-lg font-semibold text-primary">Project Navigation</h2>
                <button id="sidebar-close" class="p-2 rounded-md">
                    <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <!-- Scrollable content area -->
            <div id="sidebar-content" class="flex flex-col justify-between overflow-y-auto" style="height: calc(100vh - 65px);">
                <!-- Main Links -->
                <div class="p-4">
                    <h3 class="text-sm font-medium text-secondary uppercase mb-2">Sections</h3>
                    <ul class="flex flex-col space-y-1">
                        <li><a href="#about-me" class="sidebar-link text-lg font-medium text-primary hover:text-accent flex items-center p-2 rounded-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>About Me</a></li>
                        <li><a href="#featured" class="sidebar-link text-lg font-medium text-primary hover:text-accent flex items-center p-2 rounded-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118L2.98 9.112c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>Featured</a></li>
                        <li><a href="#hardware" class="sidebar-link text-lg font-medium text-primary hover:text-accent flex items-center p-2 rounded-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Hardware</a></li>
                        <li><a href="#software" class="sidebar-link text-lg font-medium text-primary hover:text-accent flex items-center p-2 rounded-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m-4 4l4 4-4 4M6 16v-4m-2-2h4"></path></svg>Software</a></li>
                        <li><a href="#research" class="sidebar-link text-lg font-medium text-primary hover:text-accent flex items-center p-2 rounded-md"><svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.363-.472a6 6 0 00-5.232 5.232l.472 2.363a2 2 0 00.547 1.022l3.956 3.956a2 2 0 002.828 0l2.828-2.828a2 2 0 000-2.828l-3.956-3.956zM14 6a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>Research</a></li>
                    </ul>

                    <!-- Divider -->
                    <div class="border-t border-primary my-4"></div>

                    <!-- Project Links -->
                    <h3 class="text-sm font-medium text-secondary uppercase mb-2">All Projects</h3>
                    <div id="sidebar-project-list" class="flex flex-col space-y-1">
                        <!-- Project links will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 
      MAIN CONTENT
    -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl pt-16">

        <!-- 
          ABOUT ME SECTION
          - Profile picture, blurb, and links.
        -->
        <section id="about-me" class="my-16">
            <div class="flex flex-col md:flex-row items-center">
                <!-- Profile Picture -->
                <div class="relative w-40 h-40 md:w-48 md:h-48 flex-shrink-0 mb-8 md:mb-0 md:mr-10">
                    <div class="absolute inset-0 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full -m-2"></div>
                    <img class="relative w-full h-full object-cover rounded-full border-4 border-secondary" 
                         src="../images/headshot.jpg" 
                         alt="Headshot photo">
                </div>
                
                <!-- Info -->
                <div class="flex-1 text-center md:text-left">
                    <h1 class="text-3xl md:text-4xl font-bold text-primary mb-3">
                        Kadon Liang | UC Berkeley EECS
                    </h1>
                    <!-- 
                      FIX 1: Removed dark:text-gray-300 from this <p> tag.
                      It will now correctly use the `text-secondary` CSS variable in both light and dark modes.
                    -->
                    <p class="text-lg text-secondary mb-6">
                        Welcome to my portfolio! I'm an EECS major at UC Berkeley passionate about robotics, AI, and software. My work, from leading a VEX team to building sustainability apps, is all about applying engineering to real-world challenges. Feel free to explore my work below!
                    </p>
                    
                    <!-- Links -->
                    <div class="flex items-center justify-center md:justify-start space-x-5">
                        <a href="https://github.com/KOL305" target="_blank" rel="noopener noreferrer" class="text-secondary hover:text-primary transition-colors duration-200" title="GitHub">
                            <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.165 6.839 9.492.5.092.682-.217.682-.483 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.03-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.818c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.003 10.003 0 0022 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd"></path></svg>
                        </a>
                        <a href="https://www.linkedin.com/in/kadon-liang/" target="_blank" rel="noopener noreferrer" class="text-secondary hover:text-primary transition-colors duration-200" title="LinkedIn">
                            <svg class="w-7 h-7" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.783-1.75-1.75s.784-1.75 1.75-1.75 1.75.783 1.75 1.75-.784 1.75-1.75 1.75zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"></path></svg>
                        </a>
                        <a href="mailto:kadon_liang@berkeley.edu" class="text-secondary hover:text-primary transition-colors duration-200" title="Email">
                            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M3 18h18V6H3v12z"></path></svg>
                        </a>
                        <a href="https://drive.google.com/file/d/1qNa4AiCQ9f2UaSBW0KC7MlWW4iab49ca/view?usp=sharing" target="_blank" class="text-secondary hover:text-primary transition-colors duration-200" title="Download Resume">
                            <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Container for all project sections -->
        <div class="space-y-16">
            <!-- 
              FEATURED PROJECTS SECTION
            -->
            <section id="featured">
                <h2 class="text-2xl font-bold text-primary mb-6">Featured Projects</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6" id="featured-projects">
                    <!-- Featured projects will be injected here -->
                </div>
            </section>

            <!-- 
              HARDWARE & ROBOTICS SECTION
            -->
            <section id="hardware">
                <h2 class="text-2xl font-bold text-primary mb-6">Hardware & Robotics</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="hardware-projects">
                    <!-- Hardware projects will be injected here -->
                </div>
            </section>

            <!-- 
              SOFTWARE SECTION
            -->
            <section id="software">
                <h2 class="text-2xl font-bold text-primary mb-6">Software</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="software-projects">
                    <!-- Software projects will be injected here -->
                </div>
            </section>

            <!-- 
              RESEARCH SECTION
            -->
            <section id="research">
                <h2 class="text-2xl font-bold text-primary mb-6">Research & Technical Analysis</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="research-projects">
                    <!-- Research projects will be injected here -->
                </div>
            </section>
        </div>
    </main>

    <!-- 
      PROJECT MODAL
      - Hidden by default, shown when a project is clicked.
    -->
    <div id="project-modal" class="modal fixed inset-0 z-50 overflow-y-auto p-4 pt-20 hidden">
        <!-- Overlay -->
        <div class="modal-overlay fixed inset-0 bg-black/70 backdrop-blur-sm opacity-0 transition-opacity duration-300"></div>

        <!-- Content -->
        <div class="modal-content relative bg-secondary w-full max-w-3xl mx-auto rounded-lg shadow-xl">
            <!-- Header -->
            <div class="flex items-center justify-between p-5 border-b border-primary">
                <h3 id="modal-title" class="text-xl font-semibold text-primary">Project Title</h3>
                <button id="modal-close" class="p-2 rounded-md hover:bg-accent">
                    <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Body -->
            <div class="p-6">
                <img id="modal-image" src="httpsa://placehold.co/600x400" alt="Project Image" class="w-full h-64 object-cover rounded-md mb-4 border border-primary">
                
                <div class="flex items-center justify-between mb-4">
                     <!-- Date -->
                     <span id="modal-date" class="text-sm text-secondary">Date</span>

                     <!-- Tags -->
                    <div id="modal-tags" class="flex flex-wrap gap-2">
                        <!-- Tags injected here -->
                    </div>
                </div>

                <!-- 
                  FIX 2: Removed text-primary and dark:text-gray-300 from this <div>.
                  It will now correctly use the `prose` and `dark:prose-invert` classes to handle text color.
                -->
                <div id="modal-description" class="prose dark:prose-invert max-w-none">
                    <p>Full project description...</p>
                </div>
            </div>

            <!-- Footer / Links -->
            <div class="flex items-center justify-end p-5 border-t border-primary space-x-3">
                <a id="modal-link-secondary" href="#" target="_blank" rel="noopener noreferrer" class="py-2 px-4 rounded-md text-primary bg-accent hover:bg-opacity-80 transition-colors">
                    Demo Video
                </a>
                <a id="modal-link-primary" href="#" target="_blank" rel="noopener noreferrer" class="py-2 px-4 rounded-md text-white bg-blue-600 hover:bg-blue-700 transition-colors">
                    View Project
                </a>
            </div>
        </div>
    </div>

    <!-- 
      FOOTER
    -->
    <footer class="py-10 mt-20 border-t border-primary">
        <div class="text-center text-secondary">
            <p>&copy; 2025 Kadon Liang. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // --- PROJECT DATA ---
        const projects = [
            // HARDWARE
            {
                id: 'dashboard',
                title: 'Dashboard PCB',
                category: 'hardware',
                featured: false,
                date: 'Ongoing',
                image: '../images/dashboard.png',
                descriptionShort: 'PCB design with custom ESP32 dev board and I²C display for Gen 11 Solar Car.',
                descriptionFull: `
                    <p>Leading a team of 3 to develop a dashboard PCB with custom ESP32 dev board and I²C display for the UC Berkeley Solar Car Racing Team's Gen 11 car.</p>
                    <ul>
                        <li>Finished product will house buttons, switches, and sliders for the driver that will control various car functionalities (solar arrays, fans, etc.) and an OLED display for persistent data (subsystem statuses, speedometer, etc.)</li>
                        <li>Currently generating schematic and layout using KiCad. Ensuring proper integration between OLED display, switches and buttons, and ESP32 board.</li>
                        <li>Worked cross-team to generate PCB requirements and criteria, documenting design details and setting deadlines on Confluence.</li>
                    </ul>
                `,
                tags: ['PCB Design', 'I²C', 'ESP32', 'Embedded Systems', 'KiCad'],
                linkPrimary: 'https://github.com/CalSol/Gen11-HW/tree/dashboard',
                linkSecondary: null
            },
            {
                id: 'motor-testing',
                title: 'Previous Gen Solar Car Motor Integration',
                category: 'hardware',
                featured: true,
                date: 'Ongoing',
                image: '../images/motortesting.png',
                descriptionShort: 'CAN Debugging NGMSCM150 motor integration WaveSculpter22 motor controller',
                descriptionFull: `
                    <p>Working directly with electrical team leads to get past-generation NGMSCM150 motors to spin using the WaveSculpter22 motor controller, with plans to integrate into the new Gen 11 solar car.</p>
                    <ul>
                        <li>Conducting much data sheet and documentation reading of motor/motor controller properties alongside onsite testing.</li>
                        <li>Through CAN line debugging and various tests with an oscilloscope, have diagnosed a misalignment of the motor's internal hall-effect sensors' phase degree (60°) and the WaveSculpter22's expected phase degree (120°), which led to erroring values.</li>
                        <li>Initially utilized a transistor and swapped wires into the motor controller to invert and swap hall outputs but still failed.</li>
                        <li>Currently waiting on Dynamics team to disassemble motor for us to manually invert the sensors themselves.</li>

                    </ul>
                `,
                tags: ['CAN Bus', 'WaveSculpter22', 'NGMSCM150', 'Embedded Systems', 'Motor Control'],
                linkPrimary: null,
                linkSecondary: null
            },
            {
                id: 'smart-home',
                title: 'Smart Home Automation System',
                category: 'hardware',
                featured: false,
                date: 'Ongoing',
                image: '../images/smarthome.jpg',
                descriptionShort: 'A custom home automation system to control devices and reduce energy consumption.',
                descriptionFull: `
                    <p>Designed and implemented a custom home automation system to automate lights, fans, and various devices within my room, as a pilot for a larger smart home project to reduce energy consumption.</p>
                    <ul>
                        <li>Utilized Raspberry Pi microcontrollers with integrated relays, thermal, and ultrasonic sensors to gather environmental data and control devices.</li>
                        <li>Implemented a robust messaging system using the MQTT (Mosquitto) protocol to ensure seamless and reliable communication between all hardware components.</li>
                        <li>Integrated an IR receiver to enable manual control via a remote, allowing users to set timers or switch to automatic mode for added flexibility.</li>
                        <li>Currently developing a mobile application to provide a user-friendly interface for monitoring and toggling devices, expanding the system's functionality and accessibility.</li>
                    </ul>
                `,
                tags: ['Raspberry Pi', 'MQTT', 'IoT', 'Embedded Systems', 'Python'],
                linkPrimary: null,
                linkSecondary: null
            },
            {
                id: 'vex-robotics',
                title: 'VEX Robotics High Stakes Season',
                category: 'hardware',
                featured: false,
                date: '2020-2024',
                image: '../images/vex.png',
                descriptionShort: 'Led full design cycle for competition robots with manual and automonous control.',
                descriptionFull: `
                    <p>Led a team of 6 as captain to design, build, and program robots for VEX competitions across California. Set project deadlines, coordinated manpower, and defined strategy to drive team success.</p>
                    <ul>
                        <li>Achieved three State qualifications and secured multiple awards, including 2 Excellence Awards, 3 Design Awards, and 1 Inspire Award, testifying to the team's technical skill and professionalism.</li>
                        <li>Contributed as a core team member in computer-aided design (Fusion 360), autonomous code development (PROS C++, LemLib), and advanced path planning.</li>
                        <li>Innovated a novel <strong>double-ring scoring mechanism</strong> for the 2024-25 "High Stakes" season, allowing the robot to score rings twice as fast as single-mechanism competitors.</li>
                        <li>Documented the entire engineering design process in detailed notebooks, effectively communicating concept ideas, prototypes, and design choices to competition judges.</li>
                    </ul>
                `,
                tags: ['Robotics', 'PROS C++', 'Fusion 360', 'Project Management'],
                linkPrimary: 'https://drive.google.com/file/d/1Y262yHZ7NgvJ86ycZDFWL33HpLlogBLO/view?usp=sharing',
                linkSecondary: null
            },
            {
                id: 'eagle-scout-project',
                title: 'Eagle Scout Service Project',
                category: 'hardware',
                featured: false,
                date: '2023',
                image: '../images/eagleproject.png',
                descriptionShort: 'Building outdoor storage cabinets for the CHS Robotics Club.',
                descriptionFull: `
                    <p>Led a team of 21 volunteers to design, fundraise for, and construct two large outdoor storage cabinets for the California High Robotics Club, resulting in 300 hours of awarded community service.</p>
                    <ul>
                        <li>Managed the entire project lifecycle, including collaborating with local businesses to secure $800 worth of donated materials.</li>
                        <li>Utilized computer-aided design (CAD) to create detailed design proposals and <a href="https://drive.google.com/file/d/1mlDF2Wy1Y2oLxDHLs2jGJp9aAJVpId7l/view?usp=sharing">assembly manuals</a> for the project.</li>
                    </ul>
                `,
                tags: ['Onshape CAD', 'Design Proposal', 'Project Management', 'Assembly'],
                linkPrimary: 'https://drive.google.com/file/d/1Naa6zMqsx5Fr_JJbQSE8ZOXwHcVA6yKB/view?usp=sharing',
                linkSecondary: null
            },
            // SOFTWARE
            {
                id: 'greengrade',
                title: 'GreenGrade Sustainability Analyzer',
                category: 'software',
                featured: false,
                date: '2024',
                image: '../images/greengrade.png',
                descriptionShort: 'Fuzzy logic analysis of company sustainability/ESG reports using the Gemini API.',
                descriptionFull: `
                    <p>For the 2024 Google Gemini API Competition, used fuzzy logic to determine a company’s sustainability interval index, using a customizable set of parameters, given data from sustainability and ESG reports scraped manually or through the Gemini API.</p>
                    <p>Through a mobile app, outputs a score and breakdown analysis, aiming to allow policymakers to determine a company’s true sustainability through a mathematical and algorithmic process. Users can view all their logged companies through a dashboard, allowing for easy comparison between companies.</p>
                `,
                tags: ['AI/ML', 'Google Gemini', 'Fuzzy Logic', 'Mobile App', 'Sustainability'],
                linkPrimary: 'https://github.com/KOL305/GreenGrade',
                linkSecondary: 'https://drive.google.com/file/d/144YSIiQVfv4mO7qh6bYnb1NyxOYBt7jo/view?usp=sharing' // Demo Video
            },
            {
                id: 'smartgen',
                title: 'SmartGen AI Energy Advisor',
                category: 'software',
                featured: true,
                date: '2023',
                image: '../images/smartgen.png',
                descriptionShort: 'A web app to help homeowners reduce energy usage using ML and GPT-3.5.',
                descriptionFull: `
                    <p>Developed a web application, SmartGen, for the 2023 Congressional App Challenge in a team of 3, aimed at helping homeowners reduce energy usage by providing insights into their energy generation and consumption patterns.</p>
                    <ul>
                        <li>Engineered a regression prediction model using LightGBM Gradient-boosting Decision Trees to forecast future energy usage.</li>
                        <li>Integrated OpenAI GPT-3.5 Turbo to generate personalized, data-driven recommendations for energy conservation.</li>
                        <li>Designed a user-friendly dashboard that displays daily energy statistics and predicted savings, encouraging continuous mindful consumption.</li>
                    </ul>
                `,
                tags: ['AI/ML', 'LightGBM', 'OpenAI', 'Python', 'Web App'],
                linkPrimary: 'https://github.com/KOL305/smart-gen',
                linkSecondary: 'https://youtu.be/Aekci3r5V8A?si=KYZFIJLS2oHUSIPP' // Demo Video
            },
            {
                id: 'georepair',
                title: 'GeoRepair Infrastructure Reporter',
                category: 'software',
                featured: false,
                date: '2021',
                image: '../images/georepair.png',
                descriptionShort: 'Full-stack app for citizens to report and geotag damaged infrastructure.',
                descriptionFull: `
                    <p>Developed a full-stack, open-source application with both web-based and mobile components to enable citizens to report and geotag damaged infrastructure in their communities.</p>
                    <ul>
                        <li>Engineered a social media platform within the application that allowed community members to upvote and comment on reported issues, fostering a collaborative approach to urban repair.</li>
                        <li>Designed an administrative dashboard that provided authorities with a geographical visualization of all reported issues, enabling them to create a more efficient and data-driven response.</li>
                    </ul>
                `,
                tags: ['Full-Stack', 'Mobile App', 'Web App', 'Firebase', 'Open Source'],
                linkPrimary: 'https://github.com/KOL305/geo-repair',
                linkSecondary: null
            },
            {
                id: 'nutrimood',
                title: 'Nutrimood Calorie Tracker',
                category: 'software',
                featured: false,
                date: '2022',
                image: '../images/nutrimood.png',
                descriptionShort: 'A mobile calorie and macronutrient tracker app built with Flutter.',
                descriptionFull: `
                    <p>Developed a calorie and macronutrient tracker mobile application, Nutrimood, for the 2022 Congressional App Challenge.</p>
                    <ul>
                        <li>Utilized the USDA Food Data Central API to provide comprehensive food data, enabling users to log and monitor their dietary intake.</li>
                        <li>Integrated animated sprites to visually represent the user's dietary habits, with the health and mood of the pet directly tied to the user's nutrient and calorie intake.</li>
                        <li>Designed the user interface (UI) using Flutter, creating an intuitive and engaging experience that motivated users to make healthier dietary choices.</li>
                    </ul>
                `,
                tags: ['Mobile App', 'Flutter', 'API', 'UI/UX'],
                linkPrimary: 'https://github.com/KOL305/nutrimood-mobile', // Server: https://github.com/KOL305/nutrimood-server
                linkSecondary: 'https://drive.google.com/file/d/1vtqJMKKQ9kR_QasBJNJIcKIkQYfMwH3V/view?usp=sharing'
            },
            {
                id: 'task-manager-slimes',
                title: 'Task Manager with Slimes',
                category: 'software',
                featured: false,
                date: '2022',
                image: '../images/taskmanagerwithslimes.png',
                descriptionShort: 'A web-based task manager that incentivized productivity with a virtual pet.',
                descriptionFull: `
                    <p>Developed a web-based task manager that incentivized productivity by allowing users to earn coins for a virtual pet, winning <strong>2nd place at the 2022 San Ramon Hackathon</strong>.</p>
                    <p>By completing tasks, users gained coins, which were used to purchase accessories and decorations for their slimes. A dashboard displays their metrics and enables users to better understand their work patterns.</p>
                `,
                tags: ['Hackathon', 'Web App', 'JavaScript', 'Gamification'],
                linkPrimary: 'https://github.com/KOL305/task-manager-with-slimes',
                linkSecondary: null
            },
            {
                id: 'wordcloud',
                title: 'WordCloud Generator',
                category: 'software',
                featured: false,
                date: '2022',
                image: '../images/wordcloud.png',
                descriptionShort: 'A web GUI for generating word clouds with client and server-side options.',
                descriptionFull: `
                    <p>Engineered a web-based word cloud generator GUI with both client-side (Javascript) and server-side (Python) functionality, earning <strong>2nd place at the 2022 AT&T Junior Labs Hackathon</strong>.</p>
                `,
                tags: ['Hackathon', 'Web App', 'Python', 'JavaScript'],
                linkPrimary: 'https://github.com/KOL305/word-cloud',
                linkSecondary: null
            },
            {
                id: 'overhaul',
                title: 'Overhaul Fishery Simulator',
                category: 'software',
                featured: false,
                date: '2023',
                image: '../images/overhaul.png',
                descriptionShort: 'A p5.js game simulating fishery management to educate on overfishing.',
                descriptionFull: `
                    <p>Created a web-based fishery management simulator using the p5.js library, highlighting the risks of overfishing, winning <strong>3rd place at the 2023 San Ramon Hackathon</strong>.</p>
                    <p>Random in-game events, such as rapid eutrophication, would cause players to decide between overfishing their pond or being unable to pay rent. Instructional messages accompanied events to reinforce the learning experience.</p>
                `,
                tags: ['Hackathon', 'Game Dev', 'p5.js', 'Sustainability'],
                linkPrimary: 'https://github.com/KOL305/overhaul',
                linkSecondary: null
            },
            {
                id: 'cloud-nine',
                title: 'Cloud 9 Sleep Tracker',
                category: 'software',
                featured: false,
                date: '2022',
                image: '../images/cloudnine.png',
                descriptionShort: 'A sleep-tracking web application with a white noise collection and drawing pad.',
                descriptionFull: `
                    <p>Designed and built a sleep-tracking web application with features including a white noise collection and drawing pad, achieving <strong>finalist designation at the 2022 TeenTech SF Hackathon</strong>.</p>
                    <p>The app enabled users to log and track sleep patterns and sleep cycles, informing them to make better sleep decisions.</p>
                `,
                tags: ['Hackathon', 'Web App', 'JavaScript'],
                linkPrimary: 'https://github.com/KOL305/cloud-nine',
                linkSecondary: null
            },
            // RESEARCH
            {
                id: 'carbon-capture-tea',
                title: 'Techno-economic Analysis of Carbon Capture',
                category: 'research',
                featured: false,
                date: '2023',
                image: '../images/pscvsdac.jpg',
                descriptionShort: 'TEA of Point Source Capture vs. Direct Air Capture at COSMOS (UCLA).',
                descriptionFull: `
                    <p>Performed a techno-economic analysis of two distinct carbon capture technologies: Point Source Capture (PSC) and Direct Air Capture (DAC) at the California State Summer School for Mathematics and Science at UCLA.</p>
                    <ul>
                        <li>Collaborated in a team of 6 to investigate production costs, capture processes, and method efficiency to determine the scalability and viability of each system.</li>
                        <li>Presented findings to students and professors on the future economic and environmental impact of these technologies, concluding that PSC is more cost-effective and has a lower energy requirement than DAC.</li>
                        <li>Integrated findings on the increased in U.S. manufacturing to demonstrate how PSC can be adopted into new facilities to enhance sustainability.</li>
                    </ul>
                `,
                tags: ['Research', 'TEA', 'Sustainability', 'COSMOS'],
                linkPrimary: 'https://drive.google.com/file/d/1DULSiS7sPJoN4xFQr06I3I-8t63uNmmP/view?usp=sharing',
                linkSecondary: null
            }
        ];

        // --- GLOBAL VARIABLES ---
        let currentModalProjectId = null;

        // --- THEME TOGGLE ---
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcons = document.querySelectorAll('.theme-icon-sun');
        const moonIcons = document.querySelectorAll('.theme-icon-moon');
        const body = document.body;

        // Check for saved theme in localStorage
        if (localStorage.getItem('theme') === 'dark') {
            enableDarkMode();
        } else {
            enableLightMode();
        }

        themeToggle.addEventListener('click', () => {
            if (body.classList.contains('theme-dark')) {
                enableLightMode();
                localStorage.setItem('theme', 'light');
            } else {
                enableDarkMode();
                localStorage.setItem('theme', 'dark');
            }
        });

        function enableDarkMode() {
            body.classList.remove('theme-light');
            body.classList.add('theme-dark');
            document.documentElement.classList.add('dark'); // For Tailwind
            sunIcons.forEach(icon => icon.classList.remove('hidden'));
            moonIcons.forEach(icon => icon.classList.add('hidden'));
        }

        function enableLightMode() {
            body.classList.remove('theme-dark');
            body.classList.add('theme-light');
            document.documentElement.classList.remove('dark'); // For Tailwind
            sunIcons.forEach(icon => icon.classList.add('hidden'));
            moonIcons.forEach(icon => icon.classList.remove('hidden'));
        }

        // --- SIDEBAR TOGGLE ---
        const sidebarOpenBtn = document.getElementById('sidebar-open');
        const sidebarCloseBtn = document.getElementById('sidebar-close');
        const sidebarContainer = document.getElementById('sidebar-container');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebar-overlay');
        const sidebarLinks = document.querySelectorAll('.sidebar-link');

        function openSidebar() {
            sidebarContainer.classList.remove('hidden');
            // Allow transitions to happen
            setTimeout(() => {
                sidebar.classList.remove('-translate-x-full');
                sidebarOverlay.classList.remove('opacity-0');
            }, 10);
        }

        function closeSidebar() {
            sidebar.classList.add('-translate-x-full');
            sidebarOverlay.classList.add('opacity-0');
            // Hide after transition
            setTimeout(() => {
                sidebarContainer.classList.add('hidden');
            }, 300);
        }

        sidebarOpenBtn.addEventListener('click', openSidebar);
        sidebarCloseBtn.addEventListener('click', closeSidebar);
        sidebarOverlay.addEventListener('click', closeSidebar);
        sidebarLinks.forEach(link => {
            link.addEventListener('click', closeSidebar);
        });

        // --- PROJECT CARD CREATION ---
        const featuredContainer = document.getElementById('featured-projects');
        const hardwareContainer = document.getElementById('hardware-projects');
        const softwareContainer = document.getElementById('software-projects');
        const researchContainer = document.getElementById('research-projects');
        const sidebarProjectList = document.getElementById('sidebar-project-list');

        // Counters for stagger animation
        let featuredCounter = 0;
        let hardwareCounter = 0;
        let softwareCounter = 0;
        let researchCounter = 0;

        function createProjectCard(project) {
            // Determine container
            let container;
            let counter;

            if (project.category === 'hardware') {
                container = hardwareContainer;
                counter = ++hardwareCounter;
            } else if (project.category === 'software') {
                container = softwareContainer;
                counter = ++softwareCounter;
            } else if (project.category === 'research') {
                container = researchContainer;
                counter = ++researchCounter;
            }

            const card = document.createElement('div');
            card.className = `project-card bg-secondary rounded-lg shadow-custom overflow-hidden border border-primary flex flex-col`;
            card.dataset.id = project.id;

            // Add animation delay
            if (container) {
                card.style.transitionDelay = `${counter * 100}ms`; // 100ms stagger
            }

            let tagsHtml = project.tags.slice(0, 3).map(tag => 
                `<span class="inline-block bg-accent text-secondary text-xs font-medium px-2 py-0.5 rounded-full">${tag}</span>`
            ).join('');

            card.innerHTML = `
                <img src="${project.image}" alt="${project.title}" class="w-full h-48 object-cover">
                <div class="p-5 flex-grow flex flex-col">
                    <h3 class="text-xl font-semibold text-primary mb-2">${project.title}</h3>
                    <p class="text-secondary text-sm mb-4 flex-grow">${project.descriptionShort}</p>
                    <div class="mb-4">
                        <div class="flex flex-wrap gap-2">
                            ${tagsHtml}
                        </div>
                    </div>
                    <a href="#" data-id="${project.id}" class="see-more-link text-sm font-medium text-accent hover:underline">
                        See More &rarr;
                    </a>
                </div>
            `;
            
            if (container) {
                container.appendChild(card);
            }

            // Add to featured if applicable
            if (project.featured && featuredContainer) {
                const featuredCard = card.cloneNode(true); // Clone for featured section
                featuredCard.dataset.id = project.id;
                // Add animation delay for featured
                featuredCard.style.transitionDelay = `${featuredCounter * 100}ms`;
                featuredCounter++;
                featuredContainer.appendChild(featuredCard);
            }

            // Add to sidebar list
            const listItem = document.createElement('a');
            listItem.href = `#`; // Will be handled by modal logic
            listItem.dataset.id = project.id;
            listItem.className = 'sidebar-link text-lg text-primary hover:text-accent p-1 rounded-md block truncate';
            listItem.textContent = project.title;
            sidebarProjectList.appendChild(listItem);
        }

        projects.forEach(createProjectCard);

        // --- PROJECT MODAL LOGIC ---
        const modal = document.getElementById('project-modal');
        const modalOverlay = modal.querySelector('.modal-overlay');
        const modalCloseBtn = document.getElementById('modal-close');
        const modalTitle = document.getElementById('modal-title');
        const modalImage = document.getElementById('modal-image');
        const modalDate = document.getElementById('modal-date');
        const modalTags = document.getElementById('modal-tags');
        const modalDescription = document.getElementById('modal-description');
        const modalLinkPrimary = document.getElementById('modal-link-primary');
        const modalLinkSecondary = document.getElementById('modal-link-secondary');

        function openModal(projectId) {
            const project = projects.find(p => p.id === projectId);
            if (!project) return;

            currentModalProjectId = projectId;
            
            // --- FIX FOR SCROLLBAR SHIFT ---
            const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;
            const header = document.querySelector('header');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            document.body.style.paddingRight = `${scrollbarWidth}px`;
            if (header) {
                header.style.paddingRight = `${scrollbarWidth}px`;
            }
            // --- END FIX ---

            modalTitle.textContent = project.title;
            modalImage.src = project.image;
            modalImage.alt = project.title;
            modalDate.textContent = project.date || '';

            modalTags.innerHTML = project.tags.map(tag => 
                `<span class="inline-block bg-accent text-secondary text-xs font-medium px-3 py-1 rounded-full">${tag}</span>`
            ).join('');
            
            modalDescription.innerHTML = project.descriptionFull;

            // Handle Primary Link
            if (project.linkPrimary) {
                modalLinkPrimary.href = project.linkPrimary;
                modalLinkPrimary.classList.remove('hidden');
                // Adjust text based on link content
                if (project.linkPrimary.includes('github')) {
                    modalLinkPrimary.textContent = 'View on GitHub';
                } else if (project.category === 'research') {
                    modalLinkPrimary.textContent = 'Read Paper';
                } else {
                    modalLinkPrimary.textContent = 'View Project';
                }
            } else {
                modalLinkPrimary.classList.add('hidden');
            }

            // Handle Secondary Link (e.g., Demo Video)
            if (project.linkSecondary) {
                modalLinkSecondary.href = project.linkSecondary;
                modalLinkSecondary.classList.remove('hidden');
            } else {
                modalLinkSecondary.classList.add('hidden');
            }
            
            modal.classList.remove('hidden');
            
            // Trigger transition
            setTimeout(() => {
                modal.classList.add('open');
                modalOverlay.classList.remove('opacity-0');
            }, 10);
        }

        function closeModal() {
            modal.classList.remove('open');
            modalOverlay.classList.add('opacity-0');
            
            setTimeout(() => {
                modal.classList.add('hidden');
                
                // --- FIX FOR SCROLLBAR SHIFT ---
                const header = document.querySelector('header');
                document.body.style.overflow = ''; // Restore scrolling
                document.body.style.paddingRight = '';
                if (header) {
                    header.style.paddingRight = '';
                }
                // --- END FIX ---

                currentModalProjectId = null;
            }, 300);
        }

        // Event listeners for opening modal
        document.addEventListener('click', function(e) {
            const card = e.target.closest('.project-card, .see-more-link, .sidebar-link[data-id]');
            if (card && card.dataset.id) {
                e.preventDefault();
                openModal(card.dataset.id);
            }
        });

        // Event listeners for closing modal
        modalCloseBtn.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', closeModal);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && currentModalProjectId) {
                closeModal();
            }
        });

        // --- SCROLL ANIMATION (NEW LOGIC) ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // When the container is visible, add 'is-visible' to all its children
                    const cards = entry.target.querySelectorAll('.project-card');
                    cards.forEach(card => {
                        card.classList.add('is-visible');
                    });
                    observer.unobserve(entry.target); // Stop observing the container
                }
            });
        }, {
            threshold: 0.1 // Start when 10% of the section is visible
        });

        // Observe the containers, not the individual cards
        document.querySelectorAll('#featured, #hardware, #software, #research').forEach(section => {
            observer.observe(section);
        });

    </script>

</body>
</html>
